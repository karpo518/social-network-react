"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[677],{677:function(e,s,a){a.r(s),a.d(s,{DialogsContainer:function(){return I},default:function(){return w}});var i=a(1413),l=a(2982),n={dialogs:"Dialogs_dialogs__oe96H",dialogItems:"Dialogs_dialogItems__VFpmc",selectDialog:"Dialogs_selectDialog__ukFfu",dialog:"Dialogs_dialog__htSTl",messages:"Dialogs_messages__Cg2l+",message:"Dialogs_message__ZEWo0",incoming:"Dialogs_incoming__8SLbR",author:"Dialogs_author__0lkGo",body:"Dialogs_body__6RDuF",outgoing:"Dialogs_outgoing__-AWT8",image:"Dialogs_image__wl+13",name:"Dialogs_name__ThYtM",form:"Dialogs_form__2diAn"},o=a(3504),t=a(8478),r=a(184),d=function(e){var s="/dialogs/".concat(e.id),a=e.photos.small||t;return(0,r.jsxs)("div",{className:n.dialog+" "+n.active,children:[(0,r.jsx)("div",{className:n.image,children:(0,r.jsx)("img",{src:a,alt:"dialog img"})}),(0,r.jsxs)("div",{className:n.name,children:[(0,r.jsx)(o.OL,{to:s,children:e.userName}),e.newMessagesCount?(0,r.jsxs)("span",{className:n.newCount,children:["+",e.newMessagesCount]}):""]})]})},c=function(e){var s=e.senderId===e.selectedId?"incoming":"outgoing";return(0,r.jsxs)("div",{className:n.message+" "+n[s],children:[(0,r.jsx)("div",{className:n.author,children:(0,r.jsx)("div",{className:n.image,children:(0,r.jsx)("img",{src:t,alt:"default img"})})}),(0,r.jsx)("div",{className:n.body,children:e.body})]})},g=a(704),u=a(5889),m=a(4972),_=(0,m.B)(300),h=(0,g.Z)({form:"DialogsAddMessageForm"})((function(e){return(0,r.jsxs)("form",{onSubmit:e.handleSubmit,className:n.form,children:[(0,r.jsx)("div",{className:"title",children:"Send message"}),(0,u.G)("Write your message here..","body",[m.C,_],u.o,{fieldType:"textarea"}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:n.submit,children:"Send"})})]})})),f=function(e){var s=(null===e.newDialog?e.dialogs:[e.newDialog].concat((0,l.Z)(e.dialogs))).map((function(e){return(0,r.jsx)(d,(0,i.Z)({},e),e.id)})),a=e.messages.map((function(s){return(0,r.jsx)(c,(0,i.Z)((0,i.Z)({},s),{},{selectedId:e.selectedId}))}));return(0,r.jsxs)("div",{className:n.dialogs,children:[(0,r.jsx)("div",{className:n.dialogItems,children:s}),e.selectedId?(0,r.jsxs)("div",{className:n.messages,children:[(0,r.jsx)("div",{className:n.list,children:a}),(0,r.jsx)(h,{onSubmit:function(s){null!==e.selectedId&&e.sendMessage(e.selectedId,s)},userId:e.selectedId})]}):(0,r.jsx)("div",{className:n.selectDialog,children:"Please, select dialog!"})]})},x=a(832),j=a(8687),v=a(5987),D=a(6871),p=["isAuth"],N=function(e){return{isAuth:e.auth.isAuth}},b=a(7781),C=a(2791),I=function(e){var s=(0,D.UO)(),a=s.userId?parseInt(s.userId):0,i=[e.setSelectedDialog,e.getDialogs,e.getMessages],l=i[0],n=i[1],o=i[2];return(0,C.useEffect)((function(){l(a),n(a),o(a)}),[a,l,n,o]),(0,C.useEffect)((function(){var e=setInterval((function(){n(a),o(a)}),15e3);return function(){clearTimeout(e)}}),[a,l,n,o]),(0,r.jsx)(f,{dialogs:e.dialogs,newDialog:e.newDialog,messages:e.messages,selectedId:e.selectedId,sendMessage:e.sendMessage})},y={getDialogs:x.AB,createNewDialog:x.Nl,resetNewDialog:x.Xy.resetNewDialog,getMessages:x._U,sendMessage:x.bG,setSelectedDialog:x.Xy.setSelectedDialog},w=(0,b.qC)((function(e){return(0,j.$j)(N)((function(s){s.isAuth;var a=(0,v.Z)(s,p);return s.isAuth?(0,r.jsx)(e,(0,i.Z)({},a)):(0,r.jsx)(D.Fg,{to:"/login"})}))}),(0,j.$j)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,selectedId:e.dialogsPage.selectedId,newDialog:e.dialogsPage.newDialog,auth:e.auth}}),y))(I)},5889:function(e,s,a){a.d(s,{o:function(){return h},G:function(){return f}});var i=a(1413),l=a(5987),n=a(6139),o="FormControls_checkboxControl__33VzZ",t="FormControls_formControl__Bze--",r="FormControls_error__rGNdT",d="FormControls_errorText__5Si0-",c="FormControls_fieldWrap__e7QgK",g="FormControls_labelCheckboxWrap__kXX0d",u="FormControls_labelTextWrap__nPV0n",m=a(184),_=["input","meta","fieldType"],h=function(e){var s=e.input,a=e.meta,n=a.touched,o=a.error,h=e.fieldType,f=(0,l.Z)(e,_),x=n&&o;return(0,m.jsxs)("div",{className:t+" "+(x?r:""),children:[f.label&&"checkbox"!==f.type&&(0,m.jsx)("div",{className:"".concat(u),children:(0,m.jsx)("label",{htmlFor:f.id||"",children:f.label})}),(0,m.jsx)("div",{className:c,children:"input"===h?(0,m.jsx)("input",(0,i.Z)((0,i.Z)({},s),f)):(0,m.jsx)("textarea",(0,i.Z)((0,i.Z)({},s),f))}),f.label&&"checkbox"===f.type&&(0,m.jsx)("div",{className:g,children:(0,m.jsx)("label",{htmlFor:f.id||"",children:f.label})}),x?(0,m.jsx)("div",{className:d,children:(0,m.jsx)("span",{children:o})}):""]})};function f(e,s,a,l,t){var r=t.wrapClasses||"";return t.type&&"checkbox"===t.type&&(r+=o),(0,m.jsx)("div",{className:r,children:(0,m.jsx)(n.Z,(0,i.Z)({placeholder:e,name:s,validate:a,component:l},t))})}},4972:function(e,s,a){a.d(s,{B:function(){return l},C:function(){return i}});var i=function(e){if(!e||""===e)return"It is required field!"},l=function(e){return function(s){if(s&&s.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=677.a0d67de4.chunk.js.map