"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[23],{5023:function(e,n,s){s.r(n),s.d(n,{UsersPage:function(){return O}});var r=s(9439),i=s(8217),t=s(8786),a=s(2791),l=s(8687),o=s(501),u=s(8386),c=(0,s(6916).P1)([function(e){return e.usersPage.users}],(function(e){return e.filter((function(e){return!0}))})),d=function(e){return e.usersPage.pageSize},f=function(e){return e.usersPage.totalUsersCount},m=function(e){return e.usersPage.currentPage},_=function(e){return e.usersPage.isFetching},h=function(e){return e.usersPage.followingInProgress},g=function(e){return e.usersPage.filter},v=s(6871);var j=function(e){var n=(0,a.useRef)();return(0,a.useEffect)((function(){n.current=e}),[e]),n.current},x=s(3079),p=s(1694),F=s.n(p),U=s(5705),b=s(3881),C=s.n(b),N="Users_inputsBlock__OiQga",P="Users_fieldItem__QXuIi",w="Users_fileItemIsFriend__V9TU9",Z="Users_term__67Z-6",Y="Users_isFriend__bJWqe",k=s(184),S=function(e){return{}},E=function(){var e=(0,U.u6)(),n=e.values,s=e.initialValues,r=e.submitForm;return(0,a.useEffect)((function(){n!==s&&r()}),[n,s,r]),null},L=a.memo((function(e){var n=(0,l.v9)(g),s=C()((function(n,s){var r=s.setSubmitting;e.onFilterChanged(n),r(!1)}),1e3,{leading:!1});return(0,k.jsx)("div",{className:N,children:(0,k.jsx)(U.J9,{initialValues:n,validate:S,onSubmit:s,children:function(e){e.values,e.isSubmitting;return(0,k.jsxs)(U.l0,{children:[(0,k.jsx)(E,{}),(0,k.jsxs)("div",{className:F()(P,w),children:[(0,k.jsx)("label",{htmlFor:"isFriend",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"}),(0,k.jsxs)(U.gN,{className:Y,name:"isFriend",as:"select",children:[(0,k.jsx)("option",{value:u.Y1.Any,children:"\u041b\u044e\u0431\u043e\u0439"}),(0,k.jsx)("option",{value:u.Y1.Yes,children:"\u0422\u0435, \u043d\u0430 \u043a\u043e\u0433\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d"}),(0,k.jsx)("option",{value:u.Y1.No,children:"\u0422\u0435, \u043d\u0430 \u043a\u043e\u0433\u043e \u041d\u0415 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d"})]})]}),(0,k.jsxs)("div",{className:P,children:[(0,k.jsx)("label",{htmlFor:"term",children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),(0,k.jsx)(U.gN,{className:Z,type:"text",name:"term"})]})]})}})})})),y={user:"User_user__vm1W0",imageCol:"User_imageCol__zWKZj",mainCol:"User_mainCol__yLpQ+",image:"User_image__-QAvZ",btn:"User_btn__NQ8ct",btnFollow:"User_btnFollow__uXb79",name:"User_name__Sid3D",mainLeft:"User_mainLeft__AkKBC",mainRight:"User_mainRight__nLT7o",location:"User_location__774Ci",status:"User_status__9rxXe",preloader:"User_preloader__63gEQ"},I=s(8478),Q=s(9603),z=s(3707),A=function(e){var n=e.user,s=e.onFollow,r=e.onUnfollow,i=(0,l.v9)(h);return(0,k.jsx)(Q.Z,{span:24,md:12,children:(0,k.jsxs)("div",{className:y.user,children:[(0,k.jsxs)("div",{className:y.imageCol,children:[(0,k.jsx)(o.OL,{to:"/profile/"+n.id,children:(0,k.jsx)("img",{className:y.image,src:null!=n.photos.small?n.photos.small:I,alt:"Profile avatar"})}),(0,k.jsx)("div",{className:y.buttons,children:n.followed?(0,k.jsx)(z.Z,{onClick:function(){r(n.id)},className:"".concat(y.btn," ").concat(y.btnFollow),disabled:i.some((function(e){return e===n.id})),children:"Unfollow"}):(0,k.jsx)(z.Z,{onClick:function(){s(n.id)},className:"".concat(y.btn," ").concat(y.btnUnfollow),disabled:i.some((function(e){return e===n.id})),children:"Follow"})})]}),(0,k.jsx)("div",{className:y.mainCol,children:(0,k.jsxs)("div",{className:y.mainLeft,children:[(0,k.jsx)(o.OL,{to:"/profile/"+n.id,children:(0,k.jsx)("div",{className:y.name,children:n.name})}),(0,k.jsx)("div",{className:y.status,children:n.status})]})})]},n.id)})},O=function(){var e=(0,l.v9)(c),n=(0,l.v9)(f),s=(0,l.v9)(m),h=(0,l.v9)(d),p=(0,l.v9)(_),F=(0,l.v9)(g),U=(0,l.I0)(),b=function(){var e=(0,v.s0)();return(0,a.useCallback)((function(n,s){return e({pathname:n,search:"?".concat((0,o.fW)(s))})}),[e])}(),C=(0,o.lr)(),N=(0,r.Z)(C,1)[0],P=(0,a.useMemo)((function(){return Object.fromEntries(N.entries())}),[N]),w=function(e){U((0,u.ZN)(e))},Z=function(e){U((0,u.fv)(e))},Y=(j(F)||F)!==F?1:s,S=(0,a.useState)(!1),E=(0,r.Z)(S,2),y=E[0],I=E[1];return(0,a.useEffect)((function(){if(console.log("run useEffect"),y){var e={};F.isFriend!==u.Y1.Any&&(e.isFriend=F.isFriend),""!==F.term&&(e.term=F.term),1!==Y&&(e.page=Y.toString()),b("/users",e)}else{if(P.page&&U(u.Yi.setCurrentPage(Number(P.page))),P.isFriend||P.term){var n=F;n.isFriend=P.isFriend||F.isFriend,n.term=P.term||F.term,U(u.Yi.setFilter(n))}I(!0)}}),[F,Y,y,U,P,b]),(0,a.useEffect)((function(){y&&(s!==Y&&U(u.Yi.setCurrentPage(Y)),U((0,u.p_)(s,h,F.isFriend,F.term)))}),[s,h,Y,F,U,y]),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{children:"Users"}),(0,k.jsx)(L,{onFilterChanged:function(e){U(u.Yi.setFilter(e))}}),(0,k.jsx)(i.Z,{defaultCurrent:1,total:n,defaultPageSize:h,current:s,onChange:function(e){U(u.Yi.setCurrentPage(e))},showSizeChanger:!1,responsive:!0}),(0,k.jsx)("div",{children:(0,k.jsx)(t.Z,{children:p?(0,k.jsx)(x.Z,{}):e.map((function(e){return(0,k.jsx)(A,{user:e,onFollow:w,onUnfollow:Z},e.id)}))})})]})}}}]);
//# sourceMappingURL=23.cb5191d1.chunk.js.map