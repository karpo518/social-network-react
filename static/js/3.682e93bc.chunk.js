"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3],{8003:function(e,s,a){a.r(s),a.d(s,{DialogsContainer:function(){return N},default:function(){return I}});var n=a(1413),i=a(2982),l=a(2791),o={dialogs:"Dialogs_dialogs__oe96H",dialogItems:"Dialogs_dialogItems__VFpmc",selectDialog:"Dialogs_selectDialog__ukFfu",dialog:"Dialogs_dialog__htSTl",messages:"Dialogs_messages__Cg2l+",message:"Dialogs_message__ZEWo0",incoming:"Dialogs_incoming__8SLbR",author:"Dialogs_author__0lkGo",body:"Dialogs_body__6RDuF",outgoing:"Dialogs_outgoing__-AWT8",image:"Dialogs_image__wl+13",name:"Dialogs_name__ThYtM",form:"Dialogs_form__2diAn"},t=a(3504),r=a(8478),d=a(184),c=function(e){var s="/dialogs/".concat(e.id),a=e.photos.small||r;return(0,d.jsxs)("div",{className:o.dialog+" "+o.active,children:[(0,d.jsx)("div",{className:o.image,children:(0,d.jsx)("img",{src:a,alt:"dialog img"})}),(0,d.jsxs)("div",{className:o.name,children:[(0,d.jsx)(t.OL,{to:s,children:e.userName}),e.newMessagesCount?(0,d.jsxs)("span",{className:o.newCount,children:["+",e.newMessagesCount]}):""]})]})},g=function(e){var s=e.senderId===e.selectedId?"incoming":"outgoing";return(0,d.jsxs)("div",{className:o.message+" "+o[s],children:[(0,d.jsx)("div",{className:o.author,children:(0,d.jsx)("div",{className:o.image,children:(0,d.jsx)("img",{src:r,alt:"default img"})})}),(0,d.jsx)("div",{className:o.body,children:e.body})]})},u=a(704),m=a(816),_=a(5304),h=(0,_.B)(300),f=(0,u.Z)({form:"DialogsAddMessageForm"})((function(e){return(0,d.jsxs)("form",{onSubmit:e.handleSubmit,className:o.form,children:[(0,d.jsx)("div",{className:"title",children:"Send message"}),(0,m.G)("Write your message here..","body",[_.C,h],m.o,{fieldType:"textarea"}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:o.submit,children:"Send"})})]})})),x=function(e){var s=(null===e.newDialog?e.dialogs:[e.newDialog].concat((0,i.Z)(e.dialogs))).map((function(e){return(0,d.jsx)(c,(0,n.Z)({},e),e.id)})),a=e.messages.map((function(s){return(0,d.jsx)(g,(0,n.Z)((0,n.Z)({},s),{},{selectedId:e.selectedId}))}));return(0,d.jsxs)("div",{className:o.dialogs,children:[(0,d.jsx)("div",{className:o.dialogItems,children:s}),e.selectedId?(0,d.jsxs)("div",{className:o.messages,children:[(0,d.jsx)("div",{className:o.list,children:a}),(0,d.jsx)(f,{onSubmit:function(s){null!==e.selectedId&&e.sendMessage(e.selectedId,s)},userId:e.selectedId})]}):(0,d.jsx)("div",{className:o.selectDialog,children:"Please, select dialog!"})]})},j=a(8281),v=a(8687),D=a(1548),p=a(7781),b=a(6871),N=function(e){var s=(0,b.UO)(),a=s.userId?parseInt(s.userId):0,n=[e.setSelectedDialog,e.getDialogs,e.getMessages],i=n[0],o=n[1],t=n[2];return(0,l.useEffect)((function(){i(a),o(a),t(a)}),[a,i,o,t]),(0,l.useEffect)((function(){var e=setInterval((function(){o(a),t(a)}),15e3);return function(){clearTimeout(e)}}),[a,i,o,t]),(0,d.jsx)(x,{dialogs:e.dialogs,newDialog:e.newDialog,messages:e.messages,selectedId:e.selectedId,sendMessage:e.sendMessage})},C={getDialogs:j.AB,createNewDialog:j.Nl,resetNewDialog:j.Si,getMessages:j._U,sendMessage:j.bG,setSelectedDialog:j.Lo},I=(0,p.qC)(D.D,(0,v.$j)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,selectedId:e.dialogsPage.selectedId,newDialog:e.dialogsPage.newDialog,auth:e.auth}}),C))(N)},816:function(e,s,a){a.d(s,{o:function(){return h},G:function(){return f}});var n=a(1413),i=a(5987),l=a(6139),o="FormControls_checkboxControl__33VzZ",t="FormControls_formControl__Bze--",r="FormControls_error__rGNdT",d="FormControls_errorText__5Si0-",c="FormControls_fieldWrap__e7QgK",g="FormControls_labelCheckboxWrap__kXX0d",u="FormControls_labelTextWrap__nPV0n",m=a(184),_=["input","meta","fieldType"],h=function(e){var s=e.input,a=e.meta,l=a.touched,o=a.error,h=e.fieldType,f=(0,i.Z)(e,_),x=l&&o;return(0,m.jsxs)("div",{className:t+" "+(x?r:""),children:[f.label&&"checkbox"!==f.type&&(0,m.jsx)("div",{className:"".concat(u),children:(0,m.jsx)("label",{htmlFor:f.id||"",children:f.label})}),(0,m.jsx)("div",{className:c,children:"input"===h?(0,m.jsx)("input",(0,n.Z)((0,n.Z)({},s),f)):(0,m.jsx)("textarea",(0,n.Z)((0,n.Z)({},s),f))}),f.label&&"checkbox"===f.type&&(0,m.jsx)("div",{className:g,children:(0,m.jsx)("label",{htmlFor:f.id||"",children:f.label})}),x?(0,m.jsx)("div",{className:d,children:(0,m.jsx)("span",{children:o})}):""]})},f=function(e,s,a,i,t){var r=t.wrapClasses||"";return t.type&&"checkbox"===t.type&&(r+=o),(0,m.jsx)("div",{className:r,children:(0,m.jsx)(l.Z,(0,n.Z)({placeholder:e,name:s,validate:a,component:i},t))})}},1548:function(e,s,a){a.d(s,{D:function(){return r}});var n=a(1413),i=a(8687),l=a(6871),o=a(184),t=function(e){return{isAuth:e.auth.isAuth}},r=function(e){return(0,i.$j)(t)((function(s){return s.isAuth?(0,o.jsx)(e,(0,n.Z)({},s)):(0,o.jsx)(l.Fg,{to:"/login"})}))}},5304:function(e,s,a){a.d(s,{B:function(){return i},C:function(){return n}});var n=function(e){if(console.log("required"),!e||""===e)return"It is required field!"},i=function(e){return function(s){if(s&&s.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=3.682e93bc.chunk.js.map