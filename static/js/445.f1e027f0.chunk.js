"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[445],{6445:function(e,t,n){n.r(t),n.d(t,{ProfilePage:function(){return S}});var o=n(2791),s=n(8687),i=n(6871),r=n(81),a=function(e){return e.profilePage.profile},l=function(e){return e.profilePage.status},c=function(e){return e.auth},u=n(704),d=n(4972),f=n(5889),m="MyPosts_postsBlock__lB-pf",p="MyPosts_posts__GSiZ2",x="Post_item__Yu4oG",h="Post_likesCount__LXQiZ",_=n(8478),j=n(184),v=function(e){return(0,j.jsxs)("div",{className:x,children:[(0,j.jsx)("img",{src:_,alt:"author img"}),e.message,(0,j.jsx)("div",{children:(0,j.jsxs)("span",{className:h,children:[e.likesCount," like(s)"]})})]})},b=(0,d.B)(300),N=o.memo((function(e){var t=e.posts.map((function(e){return(0,j.jsx)(v,{id:e.id,message:e.message,likesCount:e.likesCount},e.id)}));return(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)("h3",{children:"My Posts"}),(0,j.jsx)(I,{onSubmit:function(t){e.sendPost(t.newPostBody)}}),(0,j.jsx)("div",{className:p,children:t})]})})),I=(0,u.Z)({form:"ProfileAddPostForm"})((function(e){return(0,j.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,f.G)("Write your message here..","newPostBody",[d.C,b],f.o,{fieldType:"textarea"}),(0,j.jsx)("div",{children:(0,j.jsx)("button",{children:"Add post"})})]})})),g=N,P={updateNewPostText:r.ft.updateNewPostText,sendPost:r.D2},k=(0,s.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),P)(g),y=n(885),C=n(3504),F=n(3079),T={image:"ProfileInfo_image__Kkyc5",avatar:"ProfileInfo_avatar__1VFcV",descriptionBlock:"ProfileInfo_descriptionBlock__XBXuJ",aboutItem:"ProfileInfo_aboutItem__J2FXl",aboutTitle:"ProfileInfo_aboutTitle__zMikE",contactsBlock:"ProfileInfo_contactsBlock__cVFdA",contactList:"ProfileInfo_contactList__7p7ua",description:"ProfileInfo_description__u7GZ5",fullName:"ProfileInfo_fullName__3fR7R",updateAvatarBtn:"ProfileInfo_updateAvatarBtn__PZG2t",ownerImage:"ProfileInfo_ownerImage__bj3Hg",startChatWrap:"ProfileInfo_startChatWrap__8wLSp",profileDataForm:"ProfileInfo_profileDataForm__b+zKy",form:"ProfileInfo_form__OSgA8",fieldItem:"ProfileInfo_fieldItem__bAs7p",editDataWrap:"ProfileInfo_editDataWrap__hRuvJ",saveDataWrap:"ProfileInfo_saveDataWrap__ij-9O",contactFieldWrap:"ProfileInfo_contactFieldWrap__-jneh",errors:"ProfileInfo_errors__dIyFr"},Z=function(e){var t=(0,o.useState)(!1),n=(0,y.Z)(t,2),i=n[0],a=n[1],l=(0,o.useState)(e.status),c=(0,y.Z)(l,2),u=c[0],d=c[1],f=(0,s.I0)();(0,o.useEffect)((function(){d(e.status)}),[e.status]);return(0,j.jsx)("div",{className:T.statusBlock,children:i?(0,j.jsx)("div",{children:(0,j.jsx)("input",{autoFocus:!0,onBlur:function(){a(!1),f((0,r.Nf)(u))},onChange:function(e){d(e.currentTarget.value)},type:"text",value:u})}):(0,j.jsx)("div",{children:(0,j.jsx)("span",{onDoubleClick:function(){a(!0)},children:u})})})},A=function(e){var t=e.contactTitle,n=e.contactValue;return(0,j.jsxs)("li",{children:[(0,j.jsxs)("span",{className:T.aboutTitle,children:[t,":"]}),(0,j.jsx)("a",{href:"".concat(n),target:"_blank",rel:"noreferrer",children:"".concat(n)})]})},B=function(e){var t=e.profile,n=e.status,o=e.isOwner,s=e.activateProfileEditMode,i=Object.keys(t.contacts).filter((function(e){return t.contacts[e]}));return(0,j.jsxs)("div",{className:T.description,children:[o&&(0,j.jsx)("div",{className:T.editDataWrap,children:(0,j.jsx)("button",{onClick:s,children:"Edit"})}),(0,j.jsx)("div",{className:T.aboutItem,children:(0,j.jsx)("div",{className:T.fullName,children:t.fullName})}),(0,j.jsx)("div",{className:T.aboutItem,children:(0,j.jsx)(Z,{status:n})}),(0,j.jsxs)("div",{className:T.aboutItem,children:[(0,j.jsx)("span",{className:T.aboutTitle,children:"About me: "}),t.aboutMe?t.aboutMe:"-"]}),(0,j.jsxs)("div",{className:T.aboutItem,children:[(0,j.jsx)("span",{className:T.aboutTitle,children:"Looking for a job:"}),t.lookingForAJob?"yes":"no"]}),(0,j.jsxs)("div",{className:T.aboutItem,children:[(0,j.jsx)("div",{className:T.aboutTitle,children:"My professional skills:"}),t.lookingForAJobDescription?t.lookingForAJobDescription:"-"]}),i.length>0&&(0,j.jsxs)("div",{className:T.aboutItem,children:[(0,j.jsx)("div",{className:T.aboutTitle,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b: "}),(0,j.jsx)("ul",{className:T.contactList,children:i.map((function(e){return(0,j.jsx)(A,{contactTitle:e,contactValue:t.contacts[e]},e)}))})]})]})},w=n(6139),W=(0,u.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=Object.keys(e.profile.contacts);return(0,j.jsxs)("form",{onSubmit:e.handleSubmit,className:"".concat(T.form," ").concat(T.profileDataForm),children:[(0,j.jsx)("div",{className:T.saveDataWrap,children:(0,j.jsx)("button",{children:"Save"})}),e.error&&(0,j.jsxs)("div",{className:T.errors,children:[" ",e.error]}),(0,j.jsx)("div",{className:T.fieldItem,children:(0,j.jsx)(w.Z,{name:"fullName",component:"input",type:"text",placeholder:"Full Name"})}),(0,j.jsx)("div",{className:T.fieldItem,children:(0,f.G)("About me","aboutMe",[],f.o,{type:"text",fieldType:"textarea",label:"About me"})}),(0,j.jsx)("div",{className:T.fieldItem,children:(0,f.G)(null,"lookingForAJob",[],f.o,{type:"checkbox",fieldType:"input",label:"Looking for a job",id:"lookingForAJob"})}),(0,j.jsx)("div",{className:T.fieldItem,children:(0,f.G)("Details","lookingForAJobDescription",[],f.o,{type:"text",fieldType:"textarea",label:"My professional skills"})}),(0,j.jsxs)("div",{className:T.aboutItem,children:[(0,j.jsx)("div",{className:T.aboutTitle,children:"Contacts: "}),(0,j.jsx)("div",{className:T.contactList,children:t.map((function(e){return(0,j.jsx)("div",{className:T.contactFieldWrap,children:(0,f.G)(e,"contacts.".concat(e),[],f.o,{type:"text",fieldType:"input",label:e})},e)}))})]})]})})),D=function(e){var t=e.profile,n=e.isOwner,i=(0,s.v9)(l),a=(0,s.I0)(),c=(0,o.useRef)(null),u=(0,o.useState)(!1),d=(0,y.Z)(u,2),f=d[0],m=d[1];if(!t)return(0,j.jsx)(F.Z,{});return(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:T.descriptionBlock,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("img",{className:T.avatar+(n?" ".concat(T.ownerImage):""),src:null!=t.photos.large?t.photos.large:_,alt:"Profile avatar",title:n?"Click for uploading":"",onClick:function(){null!==c.current&&c.current.click()}}),n&&(0,j.jsx)("input",{className:T.updateAvatarBtn,ref:c,type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&a((0,r.Ju)(e.target.files[0]))}})]}),!n&&(0,j.jsx)("div",{className:T.startChatWrap,children:(0,j.jsx)(C.OL,{to:"/dialogs/".concat(t.userId),children:"Send message"})}),f?(0,j.jsx)(W,{initialValues:t,profile:t,onSubmit:function(e){a((0,r.Ii)(e)).then((function(){return m(!1)}))}}):(0,j.jsx)(B,{profile:t,status:i,isOwner:n,activateProfileEditMode:function(){m(!0)}})]})})},S=function(){var e=(0,s.v9)(a),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=(0,s.v9)(c),n=(0,i.s0)();return(0,o.useEffect)((function(){if(!1===t.isAuth)return n(e)}),[t,n,e]),t}(),n=(0,s.I0)(),l=(0,i.s0)(),u=(0,i.UO)(),d=null;u.userId?d=parseInt(u.userId):t.userId?d=t.userId:l("/login");var f=(0,o.useCallback)((function(e){n((0,r.et)(e)),n((0,r.Tq)(e))}),[n]);return(0,o.useEffect)((function(){d&&f(d)}),[d,f]),(0,j.jsx)(j.Fragment,{children:e?(0,j.jsxs)("div",{children:[(0,j.jsx)(D,{isOwner:!u.userId,profile:e}),(0,j.jsx)(k,{})]}):(0,j.jsx)("div",{children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"})})}},5889:function(e,t,n){n.d(t,{o:function(){return x},G:function(){return h}});var o=n(1413),s=n(5987),i=n(6139),r="FormControls_checkboxControl__33VzZ",a="FormControls_formControl__Bze--",l="FormControls_error__rGNdT",c="FormControls_errorText__5Si0-",u="FormControls_fieldWrap__e7QgK",d="FormControls_labelCheckboxWrap__kXX0d",f="FormControls_labelTextWrap__nPV0n",m=n(184),p=["input","meta","fieldType"],x=function(e){var t=e.input,n=e.meta,i=n.touched,r=n.error,x=e.fieldType,h=(0,s.Z)(e,p),_=i&&r;return(0,m.jsxs)("div",{className:a+" "+(_?l:""),children:[h.label&&"checkbox"!==h.type&&(0,m.jsx)("div",{className:"".concat(f),children:(0,m.jsx)("label",{htmlFor:h.id||"",children:h.label})}),(0,m.jsx)("div",{className:u,children:"input"===x?(0,m.jsx)("input",(0,o.Z)((0,o.Z)({},t),h)):(0,m.jsx)("textarea",(0,o.Z)((0,o.Z)({},t),h))}),h.label&&"checkbox"===h.type&&(0,m.jsx)("div",{className:d,children:(0,m.jsx)("label",{htmlFor:h.id||"",children:h.label})}),_?(0,m.jsx)("div",{className:c,children:(0,m.jsx)("span",{children:r})}):""]})};function h(e,t,n,s,a){var l=a.wrapClasses||"";return a.type&&"checkbox"===a.type&&(l+=r),(0,m.jsx)("div",{className:l,children:(0,m.jsx)(i.Z,(0,o.Z)({placeholder:e,name:t,validate:n,component:s},a))})}},4972:function(e,t,n){n.d(t,{B:function(){return s},C:function(){return o}});var o=function(e){if(!e||""===e)return"It is required field!"},s=function(e){return function(t){if(t&&t.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=445.f1e027f0.chunk.js.map