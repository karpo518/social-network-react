"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[286],{5858:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var r=s(1413),o=s(5671),a=s(3144),n=s(136),i=s(5716),l=s(8687),c=s(81),u=s(2791),d=s(704),f=s(5304),p=s(816),m="MyPosts_postsBlock__lB-pf",h="MyPosts_posts__GSiZ2",x="Post_item__Yu4oG",v="Post_likesCount__LXQiZ",_=s(8478),j=s(184),b=function(e){return(0,j.jsxs)("div",{className:x,children:[(0,j.jsx)("img",{src:_,alt:"author img"}),e.message,(0,j.jsx)("div",{children:(0,j.jsxs)("span",{className:v,children:[e.likesCount," like(s)"]})})]})},g=(0,f.B)(300),P=u.memo((function(e){var t=e.posts.map((function(e){return(0,j.jsx)(b,{id:e.id,message:e.message,likesCount:e.likesCount},e.id)}));return(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)("h3",{children:"My Posts"}),(0,j.jsx)(I,{onSubmit:function(t){e.sendPost(t.newPostBody)}}),(0,j.jsx)("div",{className:h,children:t})]})})),I=(0,d.Z)({form:"ProfileAddPostForm"})((function(e){return(0,j.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.G)("Write your message here..","newPostBody",[f.C,g],p.o,{fieldType:"textarea"}),(0,j.jsx)("div",{children:(0,j.jsx)("button",{children:"Add post"})})]})})),N=P,k=(0,l.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),{updateNewPostText:c.x1,sendPost:c.D2})(N),y=s(885),C=s(8911),F={image:"ProfileInfo_image__Kkyc5",avatar:"ProfileInfo_avatar__1VFcV",descriptionBlock:"ProfileInfo_descriptionBlock__XBXuJ",aboutItem:"ProfileInfo_aboutItem__J2FXl",aboutTitle:"ProfileInfo_aboutTitle__zMikE",contactsBlock:"ProfileInfo_contactsBlock__cVFdA",contactList:"ProfileInfo_contactList__7p7ua",description:"ProfileInfo_description__u7GZ5",fullName:"ProfileInfo_fullName__3fR7R",updateAvatarBtn:"ProfileInfo_updateAvatarBtn__PZG2t",ownerImage:"ProfileInfo_ownerImage__bj3Hg",startChatWrap:"ProfileInfo_startChatWrap__8wLSp",profileDataForm:"ProfileInfo_profileDataForm__b+zKy",form:"ProfileInfo_form__OSgA8",fieldItem:"ProfileInfo_fieldItem__bAs7p",editDataWrap:"ProfileInfo_editDataWrap__hRuvJ",saveDataWrap:"ProfileInfo_saveDataWrap__ij-9O",contactFieldWrap:"ProfileInfo_contactFieldWrap__-jneh",errors:"ProfileInfo_errors__dIyFr"},S=s(3504),Z=s(6139),T=(0,d.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=Object.keys(e.profile.contacts);return(0,j.jsxs)("form",{onSubmit:e.handleSubmit,className:"".concat(F.form," ").concat(F.profileDataForm),children:[(0,j.jsx)("div",{className:F.saveDataWrap,children:(0,j.jsx)("button",{children:"Save"})}),e.error&&(0,j.jsxs)("div",{className:F.errors,children:[" ",e.error]}),(0,j.jsx)("div",{className:F.fieldItem,children:(0,j.jsx)(Z.Z,{name:"fullName",component:"input",type:"text",placeholder:"Full Name"})}),(0,j.jsx)("div",{className:F.fieldItem,children:(0,p.G)("About me","aboutMe",[],p.o,{type:"text",fieldType:"textarea",label:"About me"})}),(0,j.jsx)("div",{className:F.fieldItem,children:(0,p.G)(null,"lookingForAJob",[],p.o,{type:"checkbox",fieldType:"input",label:"Looking for a job",id:"lookingForAJob"})}),(0,j.jsx)("div",{className:F.fieldItem,children:(0,p.G)("Details","lookingForAJobDescription",[],p.o,{type:"text",fieldType:"textarea",label:"My professional skills"})}),(0,j.jsxs)("div",{className:F.aboutItem,children:[(0,j.jsx)("div",{className:F.aboutTitle,children:"Contacts: "}),(0,j.jsx)("div",{className:F.contactList,children:t.map((function(e){return(0,j.jsx)("div",{className:F.contactFieldWrap,children:(0,p.G)(e,"contacts.".concat(e),[],p.o,{type:"text",fieldType:"input",label:e})},e)}))})]})]})})),D=function(e){var t=(0,u.useState)(!1),s=(0,y.Z)(t,2),r=s[0],o=s[1],a=(0,u.useState)(e.status),n=(0,y.Z)(a,2),i=n[0],l=n[1];(0,u.useEffect)((function(){l(e.status)}),[e.status]);return(0,j.jsx)("div",{className:F.statusBlock,children:r?(0,j.jsx)("div",{children:(0,j.jsx)("input",{autoFocus:!0,onBlur:function(){o(!1),e.updateStatus(i)},onChange:function(e){l(e.currentTarget.value)},type:"text",value:i})}):(0,j.jsx)("div",{children:(0,j.jsx)("span",{onDoubleClick:function(){o(!0)},children:i})})})},A=function(e){var t=e.contactTitle,s=e.contactValue;return(0,j.jsxs)("li",{children:[(0,j.jsxs)("span",{className:F.aboutTitle,children:[t,":"]}),(0,j.jsx)("a",{href:"".concat(s),target:"_blank",rel:"noreferrer",children:"".concat(s)})]})},w=function(e){var t=e.profile,s=e.status,r=e.isOwner,o=e.updateStatus,a=e.activateEditMode,n=Object.keys(t.contacts).filter((function(e){return t.contacts[e]}));return(0,j.jsxs)("div",{className:F.description,children:[r&&(0,j.jsx)("div",{className:F.editDataWrap,children:(0,j.jsx)("button",{onClick:a,children:"Edit"})}),(0,j.jsx)("div",{className:F.aboutItem,children:(0,j.jsx)("div",{className:F.fullName,children:t.fullName})}),(0,j.jsx)("div",{className:F.aboutItem,children:(0,j.jsx)(D,{status:s,updateStatus:o})}),(0,j.jsxs)("div",{className:F.aboutItem,children:[(0,j.jsx)("span",{className:F.aboutTitle,children:"About me: "}),t.aboutMe?t.aboutMe:"-"]}),(0,j.jsxs)("div",{className:F.aboutItem,children:[(0,j.jsx)("span",{className:F.aboutTitle,children:"Looking for a job:"}),t.lookingForAJob?"yes":"no"]}),(0,j.jsxs)("div",{className:F.aboutItem,children:[(0,j.jsx)("div",{className:F.aboutTitle,children:"My professional skills:"}),t.lookingForAJobDescription?t.lookingForAJobDescription:"-"]}),n.length>0&&(0,j.jsxs)("div",{className:F.aboutItem,children:[(0,j.jsx)("div",{className:F.aboutTitle,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b: "}),(0,j.jsx)("ul",{className:F.contactList,children:n.map((function(e){return(0,j.jsx)(A,{contactTitle:e,contactValue:t.contacts[e]},e)}))})]})]})},B=function(e){var t=e.profile,s=e.status,r=e.updateStatus,o=e.isOwner,a=e.savePhoto,n=e.saveProfile,i=(0,u.useRef)(null),l=(0,u.useState)(!1),c=(0,y.Z)(l,2),d=c[0],f=c[1];if(!t)return(0,j.jsx)(C.Z,{});return(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:F.descriptionBlock,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("img",{className:F.avatar+(o?" ".concat(F.ownerImage):""),src:null!=t.photos.large?t.photos.large:_,alt:"Profile avatar",title:o?"Click for uploading":"",onClick:function(){null!==i.current&&i.current.click()}}),o&&(0,j.jsx)("input",{className:F.updateAvatarBtn,ref:i,type:"file",onChange:function(e){null!==e.target.files&&e.target.files.length&&a(e.target.files[0])}})]}),!o&&(0,j.jsx)("div",{className:F.startChatWrap,children:(0,j.jsx)(S.OL,{to:"/dialogs/".concat(t.userId),children:"Send message"})}),d?(0,j.jsx)(T,{initialValues:t,profile:t,onSubmit:function(e){n(e).then((function(){return f(!1)}))}}):(0,j.jsx)(w,{profile:t,status:s,isOwner:o,updateStatus:r,activateEditMode:function(){f(!0)}})]})})},W=function(e){return(0,j.jsxs)("div",{children:[(0,j.jsx)(B,{isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,j.jsx)(k,{})]})},O=s(6871),M=s(7781),G=s(1548),J=function(e){(0,n.Z)(s,e);var t=(0,i.Z)(s);function s(){var e;(0,o.Z)(this,s);for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))).getProfileData=function(){var t=null;e.props.router.params.userId?t=e.props.router.params.userId:e.props.auth.userId?t=e.props.auth.userId:e.props.router.navigate("/login"),t&&(e.props.getUserProfile(t),e.props.getStatus(t))},e.componentDidMount=function(){e.getProfileData()},e}return(0,a.Z)(s,[{key:"componentDidUpdate",value:function(e){e.router.params.userId!==this.props.router.params.userId&&(console.log([e.router.params.userId,this.props.router.params.userId]),this.getProfileData())}},{key:"render",value:function(){return(0,j.jsx)(j.Fragment,{children:this.props.profile?(0,j.jsx)(W,{isOwner:!this.props.router.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile}):(0,j.jsx)("div",{children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"})})}}]),s}(u.Component);var L={getUserProfile:c.et,getStatus:c.lR,updateStatus:c.Nf,savePhoto:c.Ju,saveProfile:c.Ii},V=(0,M.qC)((0,l.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,auth:e.auth}}),L),(function(e){return function(t){var s=(0,O.TH)(),o=(0,O.s0)(),a=(0,O.UO)();return(0,j.jsx)(e,(0,r.Z)((0,r.Z)({},t),{},{router:{location:s,navigate:o,params:a}}))}}),G.D)(J)},816:function(e,t,s){s.d(t,{o:function(){return h},G:function(){return x}});var r=s(1413),o=s(5987),a=s(6139),n="FormControls_checkboxControl__33VzZ",i="FormControls_formControl__Bze--",l="FormControls_error__rGNdT",c="FormControls_errorText__5Si0-",u="FormControls_fieldWrap__e7QgK",d="FormControls_labelCheckboxWrap__kXX0d",f="FormControls_labelTextWrap__nPV0n",p=s(184),m=["input","meta","fieldType"],h=function(e){var t=e.input,s=e.meta,a=s.touched,n=s.error,h=e.fieldType,x=(0,o.Z)(e,m),v=a&&n;return(0,p.jsxs)("div",{className:i+" "+(v?l:""),children:[x.label&&"checkbox"!==x.type&&(0,p.jsx)("div",{className:"".concat(f),children:(0,p.jsx)("label",{htmlFor:x.id||"",children:x.label})}),(0,p.jsx)("div",{className:u,children:"input"===h?(0,p.jsx)("input",(0,r.Z)((0,r.Z)({},t),x)):(0,p.jsx)("textarea",(0,r.Z)((0,r.Z)({},t),x))}),x.label&&"checkbox"===x.type&&(0,p.jsx)("div",{className:d,children:(0,p.jsx)("label",{htmlFor:x.id||"",children:x.label})}),v?(0,p.jsx)("div",{className:c,children:(0,p.jsx)("span",{children:n})}):""]})},x=function(e,t,s,o,i){var l=i.wrapClasses||"";return i.type&&"checkbox"===i.type&&(l+=n),(0,p.jsx)("div",{className:l,children:(0,p.jsx)(a.Z,(0,r.Z)({placeholder:e,name:t,validate:s,component:o},i))})}},1548:function(e,t,s){s.d(t,{D:function(){return l}});var r=s(1413),o=s(8687),a=s(6871),n=s(184),i=function(e){return{isAuth:e.auth.isAuth}},l=function(e){return(0,o.$j)(i)((function(t){return t.isAuth?(0,n.jsx)(e,(0,r.Z)({},t)):(0,n.jsx)(a.Fg,{to:"/login"})}))}},5304:function(e,t,s){s.d(t,{B:function(){return o},C:function(){return r}});var r=function(e){if(console.log("required"),!e||""===e)return"It is required field!"},o=function(e){return function(t){if(t&&t.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=286.58a5458e.chunk.js.map