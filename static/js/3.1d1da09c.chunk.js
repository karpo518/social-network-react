"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3],{8003:function(e,s,a){a.r(s),a.d(s,{DialogsContainer:function(){return b},default:function(){return I}});var l=a(1413),n=a(2982),i=a(2791),o={dialogs:"Dialogs_dialogs__oe96H",dialogItems:"Dialogs_dialogItems__VFpmc",selectDialog:"Dialogs_selectDialog__ukFfu",dialog:"Dialogs_dialog__htSTl",messages:"Dialogs_messages__Cg2l+",message:"Dialogs_message__ZEWo0",incoming:"Dialogs_incoming__8SLbR",author:"Dialogs_author__0lkGo",body:"Dialogs_body__6RDuF",outgoing:"Dialogs_outgoing__-AWT8",image:"Dialogs_image__wl+13",name:"Dialogs_name__ThYtM",form:"Dialogs_form__2diAn"},t=a(3504),r=a(8478),c=a(184),d=function(e){var s="/dialogs/".concat(e.id),a=e.photos.small||r;return(0,c.jsxs)("div",{className:o.dialog+" "+o.active,children:[(0,c.jsx)("div",{className:o.image,children:(0,c.jsx)("img",{src:a,alt:"dialog img"})}),(0,c.jsxs)("div",{className:o.name,children:[(0,c.jsx)(t.OL,{to:s,children:e.userName}),e.newMessagesCount?(0,c.jsxs)("span",{className:o.newCount,children:["+",e.newMessagesCount]}):""]})]})},g=function(e){var s=e.senderId===e.selectedId?"incoming":"outgoing";return(0,c.jsxs)("div",{className:o.message+" "+o[s],children:[(0,c.jsx)("div",{className:o.author,children:(0,c.jsx)("div",{className:o.image,children:(0,c.jsx)("img",{src:r,alt:"default img"})})}),(0,c.jsx)("div",{className:o.body,children:e.body})]})},u=a(704),m=a(5889),_=a(3079),h=(0,_.B)(300),f=(0,u.Z)({form:"DialogsAddMessageForm"})((function(e){return(0,c.jsxs)("form",{onSubmit:e.handleSubmit,className:o.form,children:[(0,c.jsx)("div",{className:"title",children:"Send message"}),(0,m.G)("Write your message here..","body",[_.C,h],m.o,{fieldType:"textarea"}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{className:o.submit,children:"Send"})})]})})),x=function(e){var s=(null===e.newDialog?e.dialogs:[e.newDialog].concat((0,n.Z)(e.dialogs))).map((function(e){return(0,c.jsx)(d,(0,l.Z)({},e),e.id)})),a=e.messages.map((function(s){return(0,c.jsx)(g,(0,l.Z)((0,l.Z)({},s),{},{selectedId:e.selectedId}))}));return(0,c.jsxs)("div",{className:o.dialogs,children:[(0,c.jsx)("div",{className:o.dialogItems,children:s}),e.selectedId?(0,c.jsxs)("div",{className:o.messages,children:[(0,c.jsx)("div",{className:o.list,children:a}),(0,c.jsx)(f,{onSubmit:function(s){null!==e.selectedId&&e.sendMessage(e.selectedId,s)},userId:e.selectedId})]}):(0,c.jsx)("div",{className:o.selectDialog,children:"Please, select dialog!"})]})},j=a(832),v=a(8687),D=a(1548),p=a(7781),N=a(6871),b=function(e){var s=(0,N.UO)(),a=s.userId?parseInt(s.userId):0,l=[e.setSelectedDialog,e.getDialogs,e.getMessages],n=l[0],o=l[1],t=l[2];return(0,i.useEffect)((function(){n(a),o(a),t(a)}),[a,n,o,t]),(0,i.useEffect)((function(){var e=setInterval((function(){o(a),t(a)}),15e3);return function(){clearTimeout(e)}}),[a,n,o,t]),(0,c.jsx)(x,{dialogs:e.dialogs,newDialog:e.newDialog,messages:e.messages,selectedId:e.selectedId,sendMessage:e.sendMessage})},C={getDialogs:j.AB,createNewDialog:j.Nl,resetNewDialog:j.Xy.resetNewDialog,getMessages:j._U,sendMessage:j.bG,setSelectedDialog:j.Xy.setSelectedDialog},I=(0,p.qC)(D.D,(0,v.$j)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,selectedId:e.dialogsPage.selectedId,newDialog:e.dialogsPage.newDialog,auth:e.auth}}),C))(b)},5889:function(e,s,a){a.d(s,{o:function(){return h},G:function(){return f}});var l=a(1413),n=a(5987),i=a(6139),o="FormControls_checkboxControl__33VzZ",t="FormControls_formControl__Bze--",r="FormControls_error__rGNdT",c="FormControls_errorText__5Si0-",d="FormControls_fieldWrap__e7QgK",g="FormControls_labelCheckboxWrap__kXX0d",u="FormControls_labelTextWrap__nPV0n",m=a(184),_=["input","meta","fieldType"],h=function(e){var s=e.input,a=e.meta,i=a.touched,o=a.error,h=e.fieldType,f=(0,n.Z)(e,_),x=i&&o;return console.log("input var:"),console.log(s),console.log("props var:"),console.log(f),(0,m.jsxs)("div",{className:t+" "+(x?r:""),children:[f.label&&"checkbox"!==f.type&&(0,m.jsx)("div",{className:"".concat(u),children:(0,m.jsx)("label",{htmlFor:f.id||"",children:f.label})}),(0,m.jsx)("div",{className:d,children:"input"===h?(0,m.jsx)("input",(0,l.Z)((0,l.Z)({},s),f)):(0,m.jsx)("textarea",(0,l.Z)((0,l.Z)({},s),f))}),f.label&&"checkbox"===f.type&&(0,m.jsx)("div",{className:g,children:(0,m.jsx)("label",{htmlFor:f.id||"",children:f.label})}),x?(0,m.jsx)("div",{className:c,children:(0,m.jsx)("span",{children:o})}):""]})};function f(e,s,a,n,t){var r=t.wrapClasses||"";return t.type&&"checkbox"===t.type&&(r+=o),(0,m.jsx)("div",{className:r,children:(0,m.jsx)(i.Z,(0,l.Z)({placeholder:e,name:s,validate:a,component:n},t))})}},1548:function(e,s,a){a.d(s,{D:function(){return r}});var l=a(1413),n=a(8687),i=a(6871),o=a(184),t=function(e){return{isAuth:e.auth.isAuth}},r=function(e){return(0,n.$j)(t)((function(s){return s.isAuth?(0,o.jsx)(e,(0,l.Z)({},s)):(0,o.jsx)(i.Fg,{to:"/login"})}))}},3079:function(e,s,a){a.d(s,{B:function(){return n},C:function(){return l}});var l=function(e){if(!e||""===e)return"It is required field!"},n=function(e){return function(s){if(s&&s.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=3.1d1da09c.chunk.js.map