"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[672],{5672:function(e,s,a){a.r(s),a.d(s,{DialogsContainer:function(){return N},default:function(){return b}});var n=a(2982),o=a(2791),i={dialogs:"Dialogs_dialogs__oe96H",dialogItems:"Dialogs_dialogItems__VFpmc",selectDialog:"Dialogs_selectDialog__ukFfu",dialog:"Dialogs_dialog__htSTl",messages:"Dialogs_messages__Cg2l+",message:"Dialogs_message__ZEWo0",incoming:"Dialogs_incoming__8SLbR",author:"Dialogs_author__0lkGo",body:"Dialogs_body__6RDuF",outgoing:"Dialogs_outgoing__-AWT8",image:"Dialogs_image__wl+13",name:"Dialogs_name__ThYtM",form:"Dialogs_form__2diAn"},l=a(3504),t=a(184),r=function(e){var s="/dialogs/".concat(e.id);return(0,t.jsxs)("div",{className:i.dialog+" "+i.active,children:[(0,t.jsx)("div",{className:i.image,children:(0,t.jsx)("img",{src:e.image,alt:"dialog img"})}),(0,t.jsxs)("div",{className:i.name,children:[(0,t.jsx)(l.OL,{to:s,children:e.userName}),e.newMessagesCount?(0,t.jsxs)("span",{className:i.newCount,children:["+",e.newMessagesCount]}):""]})]})},d=a(8478),c=function(e){var s=e.senderId===e.selectedId?"incoming":"outgoing";return(0,t.jsxs)("div",{className:i.message+" "+i[s],children:[(0,t.jsx)("div",{className:i.author,children:(0,t.jsx)("div",{className:i.image,children:(0,t.jsx)("img",{src:d,alt:"default img"})})}),(0,t.jsx)("div",{className:i.body,children:e.body})]})},g=a(704),u=a(816),m=a(5304),_=(0,m.B)(300),f=(0,g.Z)({form:"DialogsAddMessageForm"})((function(e){return(0,t.jsxs)("form",{onSubmit:e.handleSubmit,className:i.form,children:[(0,t.jsx)("div",{className:"title",children:"Send message"}),(0,u.G)("Write your message here..","body",[m.C,_],u.o,{fieldType:"textarea"}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{className:i.submit,children:"Send"})})]})})),h=function(e){console.log(e);var s=(null===e.newDialog?e.dialogs:[e.newDialog].concat((0,n.Z)(e.dialogs))).map((function(e){return(0,t.jsx)(r,{userName:e.userName,id:e.id,image:e.photos.small||d,newMessagesCount:e.newMessagesCount},e.id)})),a=e.messages.map((function(s){return(0,t.jsx)(c,{senderId:s.senderId,selectedId:e.selectedId,senderName:s.senderName,isIncoming:s.isIncoming,body:s.body},s.id)}));return(0,t.jsxs)("div",{className:i.dialogs,children:[(0,t.jsx)("div",{className:i.dialogItems,children:s}),e.selectedId?(0,t.jsxs)("div",{className:i.messages,children:[(0,t.jsx)("div",{className:i.list,children:a}),(0,t.jsx)(f,{onSubmit:function(s){e.sendMessage(e.selectedId,s)},userId:e.selectedId})]}):(0,t.jsx)("div",{className:i.selectDialog,children:"Please, select dialog!"})]})},x=a(2807),j=a(8687),v=a(1548),D=a(7781),p=a(6871),N=function(e){var s=(0,p.UO)(),a=s.userId?parseInt(s.userId):0,n=[e.setSelectedDialog,e.getDialogs,e.getMessages],i=n[0],l=n[1],r=n[2];return(0,o.useEffect)((function(){console.log("Use effect: set selected id"),i(a),l(a),r(a)}),[a,i,l,r]),(0,o.useEffect)((function(){console.log("Use effect: update dialogs and messages");var e=setInterval((function(){console.log("\u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b! selectedId: ".concat(a)),l(a),r(a)}),15e3);return function(){console.log("\u0414\u0435\u043c\u043e\u043d\u0442\u0430\u0436 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430!"),clearTimeout(e)}}),[a,i,l,r]),(0,t.jsx)(h,{dialogs:e.dialogs,newDialog:e.newDialog,messages:e.messages,selectedId:e.selectedId,sendMessage:e.sendMessage})},b=(0,D.qC)((0,j.$j)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages,selectedId:e.dialogsPage.selectedId,newDialog:e.dialogsPage.newDialog,auth:e.auth}}),{getDialogs:x.AB,createNewDialog:x.Nl,resetNewDialog:x.Si,selectDialog:x.dD,getMessages:x._U,sendMessage:x.bG,setSelectedDialog:x.Lo}),v.D)(N)},816:function(e,s,a){a.d(s,{o:function(){return f},G:function(){return h}});var n=a(8683),o=a(5987),i=a(6139),l="FormControls_checkboxControl__33VzZ",t="FormControls_formControl__Bze--",r="FormControls_error__rGNdT",d="FormControls_errorText__5Si0-",c="FormControls_fieldWrap__e7QgK",g="FormControls_labelCheckboxWrap__kXX0d",u="FormControls_labelTextWrap__nPV0n",m=a(184),_=["input","meta","fieldType"],f=function(e){var s=e.input,a=e.meta,i=a.touched,l=a.error,f=e.fieldType,h=(0,o.Z)(e,_),x=i&&l;return console.log(s),(0,m.jsxs)("div",{className:t+" "+(x?r:""),children:[h.label&&"checkbox"!==h.type&&(0,m.jsx)("div",{className:"".concat(u),children:(0,m.jsx)("label",{htmlFor:h.id||"",children:h.label})}),(0,m.jsx)("div",{className:c,children:"input"===f?(0,m.jsx)("input",(0,n.Z)((0,n.Z)({},s),h)):(0,m.jsx)("textarea",(0,n.Z)((0,n.Z)({},s),h))}),h.label&&"checkbox"===h.type&&(0,m.jsx)("div",{className:g,children:(0,m.jsx)("label",{htmlFor:h.id||"",children:h.label})}),x?(0,m.jsx)("div",{className:d,children:(0,m.jsx)("span",{children:l})}):""]})},h=function(e,s,a,o,t){var r=t.wrapClasses||"";return t.type&&"checkbox"===t.type&&(r+=l),(0,m.jsx)("div",{className:r,children:(0,m.jsx)(i.Z,(0,n.Z)({placeholder:e,name:s,validate:a,component:o},t))})}},1548:function(e,s,a){a.d(s,{D:function(){return r}});var n=a(8683),o=a(8687),i=a(6871),l=a(184),t=function(e){return{isAuth:e.auth.isAuth}},r=function(e){return(0,o.$j)(t)((function(s){return s.isAuth?(0,l.jsx)(e,(0,n.Z)({},s)):(0,l.jsx)(i.Fg,{to:"/login"})}))}},5304:function(e,s,a){a.d(s,{B:function(){return o},C:function(){return n}});var n=function(e){if(console.log("required"),!e||""===e)return"It is required field!"},o=function(e){return function(s){if(s&&s.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=672.65781be4.chunk.js.map