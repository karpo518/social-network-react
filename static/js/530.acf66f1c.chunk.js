"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[530],{6530:function(e,t,n){n.r(t),n.d(t,{ProfilePage:function(){return G}});var r=n(2791),i=n(8687),s=n(6871),a=n(81),o=n(3631),l=n(3580),c=n(9439),u=n(501),d=n(8478),f=n(3079),m=n(3707),p=n(704),x=n(4972),h=n(5889),j={posts:"MyPosts_posts__GSiZ2"},v="Post_item__Yu4oG",_="Post_likesCount__LXQiZ",b="Post_imgWrap__urp8h",N="Post_messageBody__D9bTr",g=n(184),I=function(e){return(0,g.jsxs)("div",{className:v,children:[(0,g.jsx)("div",{className:b,children:(0,g.jsx)("img",{src:d,alt:"author img"})}),(0,g.jsx)("div",{className:N,children:e.message}),(0,g.jsx)("div",{children:(0,g.jsxs)("span",{className:_,children:[e.likesCount," like(s)"]})})]})},y=(0,x.B)(300),k=r.memo((function(e){var t=e.posts.map((function(e){return(0,g.jsx)(I,{id:e.id,message:e.message,likesCount:e.likesCount},e.id)}));return(0,g.jsxs)("div",{className:j.postsBlock,children:[(0,g.jsx)("h3",{children:"My Posts"}),(0,g.jsx)(P,{onSubmit:function(t){e.sendPost(t.newPostBody)}}),(0,g.jsx)("div",{className:j.posts,children:t})]})})),P=(0,p.Z)({form:"ProfileAddPostForm"})((function(e){return(0,g.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,h.Gr)("Write your message here..","newPostBody",[x.C,y],h.ox,{fieldType:"textarea"}),(0,g.jsx)("div",{className:"submitBlock",children:(0,g.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"Add post"})})]})})),Z=k,T={updateNewPostText:a.ft.updateNewPostText,sendPost:a.D2},C=(0,i.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),T)(Z),F={image:"ProfileInfo_image__Kkyc5",avatar:"ProfileInfo_avatar__1VFcV",descriptionBlock:"ProfileInfo_descriptionBlock__XBXuJ",aboutItem:"ProfileInfo_aboutItem__J2FXl",aboutTitle:"ProfileInfo_aboutTitle__zMikE",contactsBlock:"ProfileInfo_contactsBlock__cVFdA",contactList:"ProfileInfo_contactList__7p7ua",description:"ProfileInfo_description__u7GZ5",fullName:"ProfileInfo_fullName__3fR7R",updateAvatarBtn:"ProfileInfo_updateAvatarBtn__PZG2t",ownerImage:"ProfileInfo_ownerImage__bj3Hg",startChatWrap:"ProfileInfo_startChatWrap__8wLSp",profileDataForm:"ProfileInfo_profileDataForm__b+zKy",form:"ProfileInfo_form__OSgA8",fieldItem:"ProfileInfo_fieldItem__bAs7p",editDataWrap:"ProfileInfo_editDataWrap__hRuvJ",saveDataWrap:"ProfileInfo_saveDataWrap__ij-9O",contactFieldWrap:"ProfileInfo_contactFieldWrap__-jneh",errors:"ProfileInfo_errors__dIyFr"},B=function(e){var t=(0,r.useState)(!1),n=(0,c.Z)(t,2),s=n[0],o=n[1],l=(0,r.useState)(e.status),u=(0,c.Z)(l,2),d=u[0],f=u[1],m=(0,i.I0)();(0,r.useEffect)((function(){f(e.status)}),[e.status]);return(0,g.jsx)("div",{className:F.statusBlock,children:s?(0,g.jsx)("div",{children:(0,g.jsx)("input",{autoFocus:!0,onBlur:function(){o(!1),m((0,a.Nf)(d))},onChange:function(e){f(e.currentTarget.value)},type:"text",value:d})}):(0,g.jsx)("div",{children:(0,g.jsx)("span",{onDoubleClick:function(){o(!0)},children:d})})})},w=function(e){var t=e.contactTitle,n=e.contactValue;return(0,g.jsxs)("li",{children:[(0,g.jsxs)("span",{className:F.aboutTitle,children:[t,":"]}),(0,g.jsx)("a",{href:"".concat(n),target:"_blank",rel:"noreferrer",children:"".concat(n)})]})},A=function(e){var t=e.profile,n=e.status,r=e.isOwner,i=e.activateProfileEditMode,s=Object.keys(t.contacts).filter((function(e){return t.contacts[e]}));return(0,g.jsxs)("div",{className:F.description,children:[r&&(0,g.jsx)("div",{className:F.editDataWrap,children:(0,g.jsx)(m.Z,{type:"primary",onClick:i,children:"Edit"})}),(0,g.jsx)("div",{className:F.aboutItem,children:(0,g.jsx)("div",{className:F.fullName,children:t.fullName})}),(0,g.jsx)("div",{className:F.aboutItem,children:(0,g.jsx)(B,{status:n})}),(0,g.jsxs)("div",{className:F.aboutItem,children:[(0,g.jsx)("span",{className:F.aboutTitle,children:"About me: "}),t.aboutMe?t.aboutMe:"-"]}),(0,g.jsxs)("div",{className:F.aboutItem,children:[(0,g.jsx)("span",{className:F.aboutTitle,children:"Looking for a job:"}),t.lookingForAJob?"yes":"no"]}),(0,g.jsxs)("div",{className:F.aboutItem,children:[(0,g.jsx)("div",{className:F.aboutTitle,children:"My professional skills:"}),t.lookingForAJobDescription?t.lookingForAJobDescription:"-"]}),s.length>0&&(0,g.jsxs)("div",{className:F.aboutItem,children:[(0,g.jsx)("div",{className:F.aboutTitle,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b: "}),(0,g.jsx)("ul",{className:F.contactList,children:s.map((function(e){return(0,g.jsx)(w,{contactTitle:e,contactValue:t.contacts[e]},e)}))})]})]})},D=n(6139),S=(0,p.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=Object.keys(e.profile.contacts);return(0,g.jsxs)("form",{onSubmit:e.handleSubmit,className:"".concat(F.form," ").concat(F.profileDataForm),children:[(0,g.jsx)("div",{className:F.saveDataWrap,children:(0,g.jsx)(m.Z,{type:"primary",htmlType:"submit",children:"Save"})}),e.error&&(0,g.jsxs)("div",{className:F.errors,children:[" ",e.error]}),(0,g.jsx)("div",{className:F.fieldItem,children:(0,g.jsx)(D.Z,{name:"fullName",component:"input",type:"text",placeholder:"Full Name"})}),(0,g.jsx)("div",{className:F.fieldItem,children:(0,h.Gr)("About me","aboutMe",[],h.ox,{type:"text",fieldType:"textarea",label:"About me"})}),(0,g.jsx)("div",{className:F.fieldItem,children:(0,h.Gr)(null,"lookingForAJob",[],h.ox,{type:"checkbox",fieldType:"input",label:"Looking for a job",id:"lookingForAJob"})}),(0,g.jsx)("div",{className:F.fieldItem,children:(0,h.Gr)("Details","lookingForAJobDescription",[],h.ox,{type:"text",fieldType:"textarea",label:"My professional skills"})}),(0,g.jsxs)("div",{className:F.aboutItem,children:[(0,g.jsx)("div",{className:F.aboutTitle,children:"Contacts: "}),(0,g.jsx)("div",{className:F.contactList,children:t.map((function(e){return(0,g.jsx)("div",{className:F.contactFieldWrap,children:(0,h.Gr)(e,"contacts.".concat(e),[],h.ox,{type:"text",fieldType:"input",label:e})},e)}))})]})]})})),W=function(e){var t=e.profile,n=e.isOwner,s=(0,i.v9)(o.mi),l=(0,i.I0)(),m=(0,r.useRef)(null),p=(0,r.useState)(!1),x=(0,c.Z)(p,2),h=x[0],j=x[1];if(!t)return(0,g.jsx)(f.Z,{});return(0,g.jsx)("div",{children:(0,g.jsxs)("div",{className:F.descriptionBlock,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("img",{className:F.avatar+(n?" ".concat(F.ownerImage):""),src:null!=t.photos.large?t.photos.large:d,alt:"Profile avatar",title:n?"Click for uploading":"",onClick:function(){null!==m.current&&m.current.click()}}),n&&(0,g.jsx)("input",{className:F.updateAvatarBtn,ref:m,type:"file",onChange:function(e){var t;null!==(t=e.target.files)&&void 0!==t&&t.length&&l((0,a.Ju)(e.target.files[0]))}})]}),!n&&(0,g.jsx)("div",{className:F.startChatWrap,children:(0,g.jsx)(u.OL,{to:"/dialogs/".concat(t.userId),children:"Send message"})}),h?(0,g.jsx)(S,{initialValues:t,profile:t,onSubmit:function(e){l((0,a.Ii)(e)).then((function(){return j(!1)}))}}):(0,g.jsx)(A,{profile:t,status:s,isOwner:n,activateProfileEditMode:function(){j(!0)}}),n&&!h&&(0,g.jsx)(C,{})]})})},G=function(){var e=(0,i.v9)(o.xl),t=(0,l.Q)(),n=(0,i.I0)(),c=(0,s.UO)(),u=(0,s.s0)(),d=null;c.userId?d=parseInt(c.userId):t.userId&&(d=t.userId);var f=(0,r.useCallback)((function(e){n((0,a.et)(e)),n((0,a.Tq)(e))}),[n]);return(0,r.useEffect)((function(){d?f(d):u("/login")}),[d,f,u]),(0,g.jsx)(g.Fragment,{children:e?(0,g.jsx)("div",{children:(0,g.jsx)(W,{isOwner:!c.userId,profile:e})}):(0,g.jsx)("div",{children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"})})}},5889:function(e,t,n){n.d(t,{zb:function(){return N},ox:function(){return _},Gr:function(){return b},fo:function(){return g}});var r=n(1413),i=n(5987),s=n(4587),a=n(9498),o=n(6023),l=n(6139),c="FormControls_checkboxControl__33VzZ",u="FormControls_formControl__Bze--",d="FormControls_error__rGNdT",f="FormControls_errorText__5Si0-",m="FormControls_fieldWrap__e7QgK",p="FormControls_labelTextWrap__nPV0n",x=n(5705),h=n(184),j=["input","meta","fieldType"],v=["field","form","fieldType"],_=function(e){var t=e.input,n=e.meta,l=n.touched,c=n.error,x=e.fieldType,v=(0,i.Z)(e,j),_=l&&c;return(0,h.jsxs)("div",{className:u+" "+(_?d:""),children:[v.label&&"checkbox"!==v.type&&(0,h.jsx)("div",{className:"".concat(p),children:(0,h.jsx)("label",{htmlFor:v.id||"",children:v.label})}),(0,h.jsx)("div",{className:m,children:"input"===x?"checkbox"===v.type?(0,h.jsx)(s.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},t),v),{},{children:v.label})):(0,h.jsx)(a.Z,(0,r.Z)((0,r.Z)({},t),v)):(0,h.jsx)(o.Z,(0,r.Z)((0,r.Z)({},t),v))}),_?(0,h.jsx)("div",{className:f,children:(0,h.jsx)("span",{children:c})}):""]})};function b(e,t,n,i,s){var a=s.wrapClasses||"";return s.type&&"checkbox"===s.type&&(a+=c),(0,h.jsx)("div",{className:a,children:(0,h.jsx)(l.Z,(0,r.Z)({placeholder:e,name:t,validate:n,component:i},s))})}var N=function(e){var t,n=e.field,l=e.form,c=l.touched,x=l.errors,j=e.fieldType,_=(0,i.Z)(e,v),b=c[n.name]&&x[n.name];return(0,h.jsxs)("div",{className:u+" "+(b?d:""),children:[_.label&&"checkbox"!==_.type&&(0,h.jsx)("div",{className:"".concat(p),children:(0,h.jsx)("label",{htmlFor:_.id||"",children:_.label})}),(0,h.jsx)("div",{className:m,children:"input"===j?"checkbox"===_.type?(0,h.jsx)(s.Z,(0,r.Z)((0,r.Z)((0,r.Z)({},n),_),{},{children:_.label})):(0,h.jsx)(a.Z,(0,r.Z)((0,r.Z)({},n),_)):(0,h.jsx)(o.Z,(0,r.Z)((0,r.Z)({},n),_))}),c[n.name]&&x[n.name]&&(0,h.jsx)("div",{className:f,children:(0,h.jsx)("p",{children:null===(t=x[n.name])||void 0===t?void 0:t.toString()})})]})};function g(e,t,n,i,s){var a=s.wrapClasses||"";return s.type&&"checkbox"===s.type&&(a+=c),(0,h.jsx)("div",{className:a,children:(0,h.jsx)(x.gN,(0,r.Z)({placeholder:e,name:t,validate:n,component:i},s))})}},3631:function(e,t,n){n.d(t,{kb:function(){return s},mi:function(){return i},xl:function(){return r}});var r=function(e){return e.profilePage.profile},i=function(e){return e.profilePage.status},s=function(e){return e.auth}},3580:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(8687),i=n(2791),s=n(6871),a=n(3631),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",t=(0,r.v9)(a.kb),n=(0,s.s0)();return(0,i.useEffect)((function(){if(!1===t.isAuth)return n(e)}),[t,n,e]),t}},4972:function(e,t,n){n.d(t,{B:function(){return i},C:function(){return r}});var r=function(e){if(!e||""===e)return"It is required field!"},i=function(e){return function(t){if(t&&t.length>e)return"You have exceeded the maximum message length(".concat(e,")")}}}}]);
//# sourceMappingURL=530.acf66f1c.chunk.js.map